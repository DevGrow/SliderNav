var check=!1,isRelative=!0;$.elementFromPoint=function(x,y){"use strict";var sl;if(!document.elementFromPoint)return null;if(!check){(sl=$(document).scrollTop())>0?isRelative=document.elementFromPoint(0,sl+$(window).height()-1)===null:(sl=$(document).scrollLeft())>0&&(isRelative=document.elementFromPoint(sl+$(window).width()-1,0)===null);check=sl>0}if(!isRelative){x+=$(document).scrollLeft();y+=$(document).scrollTop()}return document.elementFromPoint(x,y)};$.getTarget=function(evt){var el=null;evt.type==="mousemove"&&(el=evt.target);evt.type==="touchmove"&&(el=$.elementFromPoint(evt.originalEvent.touches[0].pageX,evt.originalEvent.touches[0].pageY));return el!==null?$(el):el};$.fn.alphaNav=function(options){var defaults={arrows:!1,content:".list-content",debug:!1,growEffect:!1,height:null,letters:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],overlay:!0},opts=$.extend(defaults,options),o=$.meta?$.extend({},opts,$$.data()):opts,list=$(this),listContent=o.content;if(o.overlay){$(list).append('<a id="current-target-overlay"></a>');var $overlay=$("#current-target-overlay")}$(list).addClass("list");$(listContent,list).find("li:first").addClass("selected");$(list).append('<div class="list-nav"><ul></ul></div>');for(var i in o.letters)$(".list-nav ul",list).append("<li><a class='"+o.letters[i]+"' data-target='"+o.letters[i]+"'>"+o.letters[i]+"</a></li>");var height=$(".list-nav",list).height(),regSize=parseInt($(".list-nav a").css("font-size"),10);o.height&&(height=o.height);$(listContent+", list-nav",list).css("height",height);o.debug&&$(list).append('<div id="debug">Scroll Offset: <span id="scroll-offset">0</span>. Current Target: <span id="current-target">NONE</span></div>');$(".list-nav a",list).on("touchmove mousemove",function(evt){evt.preventDefault();if(evt.target.offsetParent.className!=="list-nav")return!1;var $el=$.getTarget(evt),target=$el.data("target"),cOffset=$(listContent,list).offset().top,tOffset=$(listContent+" #"+target,list).offset().top,height=$(".list-nav",list).height();o.height&&(height=o.height);var pScroll=tOffset-cOffset-height/8;$(listContent,list).find("li").removeClass("selected");$("#"+target).addClass("selected");o.overlay&&$overlay.html(target).stop().fadeIn("fast");if(o.growEffect){$(".list-nav a",list).stop().animate({fontSize:regSize+"px"},100);var superSize=regSize*3+"px";$el.stop().animate({fontSize:superSize},100)}$(listContent,list).stop().animate({scrollTop:"+="+pScroll+"px"});if(o.debug){$("#scroll-offset",list).html(tOffset);$("#current-target",list).html(target)}});(o.overlay||o.growEffect)&&$(".list-nav a",list).on("touchend touchleave mouseout",function(evt){evt.preventDefault();o.overlay&&$overlay.stop().fadeOut("fast");o.growEffect&&$(".list-nav a").stop().animate({fontSize:regSize+"px"},100)});if(o.arrows){$(".list-nav",list).css("top","20px");$(list).prepend('<div class="slide-up end"><span class="arrow up"></span></div>');$(list).append('<div class="slide-down"><span class="arrow down"></span></div>');$(".slide-down",list).on("click",function(){$(listContent,list).animate({scrollTop:"+="+height+"px"},500)});$(".slide-up",list).on("click",function(){$(listContent,list).animate({scrollTop:"-="+height+"px"},500)})}};