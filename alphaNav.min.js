(function($){function elementFromPoint(x,y){"use strict";var sl,check=!1,isRelative=!0;if(!document.elementFromPoint)return null;if(!check){(sl=$(document).scrollTop())>0?isRelative=document.elementFromPoint(0,sl+$(window).height()-1)===null:(sl=$(document).scrollLeft())>0&&(isRelative=document.elementFromPoint(sl+$(window).width()-1,0)===null);check=sl>0}if(!isRelative){x+=$(document).scrollLeft();y+=$(document).scrollTop()}return document.elementFromPoint(x,y)}function getTarget(evt){"use strict";var el;switch(evt.type){case"mousemove":case"touchstart":case"touchend":case"click":el=evt.target;break;case"touchmove":el=elementFromPoint(evt.originalEvent.touches[0].pageX,evt.originalEvent.touches[0].pageY);break;default:el=null}return el!==null?$(el):el}$.fn.alphaNav=function(options){var opts=$.extend(!0,{},$.fn.alphaNav.defaults,options),$list=$(this),container=$(this).parent(),height=$(window).height(),$wrapper,$overlay,$debugDiv,$slider,$ul,$letters;$list.addClass("alphanav-list");$wrapper=$("<div />").attr(opts.wrapperAttributes).prependTo(container).prepend($list);$slider=$('<div id="alphanav-slider" class="alphanav-component"><ul></ul></div>').appendTo($wrapper);$ul=$slider.find("ul");for(var i in opts.letters)$ul.append("<li>"+opts.letters[i]+"</li>");$letters=$ul.find("li");opts.overlay&&($overlay=$('<div id="alphanav-target-overlay" class="alphanav-component"></div>').appendTo($wrapper));opts.debug&&($debugDiv=$('<div id="alphanav-debug" class="alphanav-component">Scroll Offset: <span id="debug-scroll-offset">0</span>. Target: <span id="debug-current-target">NONE</span></div>').appendTo($wrapper));opts.height&&(height=parseInt(opts.height)+"px");$list.css("height",height);$slider.css({top:$list.offset().top,height:height});$list.find("li:first").addClass("current");$letters.on("click touchstart touchmove mousemove",function(evt){evt.preventDefault();if(evt.target.offsetParent.id!=="alphanav-slider"){console.log("outside of my comfort zone");return!1}var $el=getTarget(evt),t=$el.html(),$target=$("#"+t,$list),tOffset;if($target===undefined)return;tOffset=$target.offset().top;$list.find("li").removeClass("current");$target.addClass("current");opts.overlay&&$overlay.html(t).stop().fadeIn("fast");if(opts.growEffect){$slider.css("width","40px");$letters.removeClass("current");$el.addClass("current")}if(opts.debug){$("#debug-scroll-offset").html(tOffset);$("#debug-current-target").html(t)}$list.stop().animate({scrollTop:"+="+tOffset+"px"},opts.scrollDuration);opts.onScrollComplete.call(this)});(opts.overlay||opts.growEffect)&&$letters.on("touchend touchleave mouseout",function(evt){evt.preventDefault();opts.overlay&&$overlay.stop().fadeOut("fast");if(opts.growEffect){$slider.css("width","25px");$letters.removeClass("current")}});if(opts.arrows){var top=$slider.offset().top,$upBtn=$('<div id="alphanav-btn-slide-up" class="alphanav-component"><span class="arrow up"></span></div>').prependTo($wrapper),$downBtn=$('<div id="alphanav-btn-slide-down" class="alphanav-component"><span class="arrow down"></span></div>').appendTo($wrapper);console.log("arrow height: "+$upBtn.outerHeight());top=parseInt(top+$upBtn.outerHeight())+"px";$slider.css("top",top);$list.css("top",top);$upBtn.off("click").on("click",function(evt){evt.preventDefault();$list.animate({scrollTop:"+="+height+"px"},opts.scrollDuration);opts.onScrollComplete.call(this)});$downBtn.off("click").on("click",function(evt){evt.preventDefault();$list.animate({scrollTop:"-="+height+"px"},opts.scrollDuration);opts.onScrollComplete.call(this)})}return this};$.fn.alphaNav.destroy=function(){var $wrapper=$("#alphanav-wrapper"),$container=$wrapper.parent(),$list=$(".alphanav-list");$container.prepend($list);$wrapper.remove();return!0};$.fn.alphaNav.defaults={arrows:!1,container:null,debug:!1,growEffect:!1,height:!1,letters:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],onScrollComplete:function(){},overlay:!0,scrollDuration:500,wrapperAttributes:{id:"alphanav-wrapper"}}})(jQuery);